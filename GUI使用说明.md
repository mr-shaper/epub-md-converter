# epub2MD GUI 使用指南

## 🎯 简介

epub2MD GUI 是一个现代化的图形界面应用，让您可以通过浏览器轻松将 EPUB 电子书转换为 Markdown 格式，无需使用命令行。

## 🚀 快速启动

### 方法一：使用启动脚本（推荐）

在终端中运行：

```bash
cd "/Users/mrshaper/Library/CloudStorage/OneDrive-SharedLibraries-onedrive/文档/Obsidian Vault/AI 应用/epub2MD"
./start-gui.sh
```

脚本会自动：
- 安装必要的依赖（首次运行）
- 启动服务器
- 在浏览器中打开应用

### 方法二：手动启动

```bash
cd "/Users/mrshaper/Library/CloudStorage/OneDrive-SharedLibraries-onedrive/文档/Obsidian Vault/AI 应用/epub2MD/gui"

# 首次运行需要安装依赖
npm install

# 启动服务器
npm start
```

然后在浏览器中访问：**http://localhost:3737**

## 📱 使用步骤

### 1. 上传 EPUB 文件

- **拖拽上传**：直接将 EPUB 文件拖拽到上传区域
- **点击选择**：点击"选择文件"按钮，从文件浏览器中选择

### 2. 配置转换选项

上传成功后，您可以配置以下选项：

#### 📄 合并章节（默认开启）
- 将所有章节合并为一个 Markdown 文件
- 可自定义输出文件名（默认：`merged.md`）
- **推荐**：适合在 Obsidian 中阅读

#### ✏️ 自动校正
- 优化中英文之间的空格和标点符号
- **推荐**：适合中文书籍

#### 🖼️ 本地化图片
- 下载远程图片到本地
- 如果转换后发现图片无法显示，建议开启此选项
- 需要 Node.js 18 或更高版本

### 3. 开始转换

点击"🚀 开始转换"按钮，等待转换完成。

### 4. 下载结果

转换完成后，点击"📥 下载 Markdown 文件"按钮下载转换后的文件。

## 🎨 界面特性

- **现代化设计**：深色主题，玻璃态效果
- **拖拽上传**：支持直接拖拽文件
- **实时反馈**：转换进度和错误提示
- **响应式布局**：适配各种屏幕尺寸
- **流畅动画**：优雅的交互体验

## 💡 使用建议

### 对于中文书籍
建议开启"合并章节"和"自动校正"选项：
```
✅ 合并章节
✅ 自动校正
□ 本地化图片
```

### 对于图片较多的书籍
如果书籍包含大量图片，建议开启"本地化图片"：
```
✅ 合并章节
□ 自动校正
✅ 本地化图片
```

### 在 Obsidian 中使用
1. 开启"合并章节"选项
2. 自定义文件名为书籍名称（如：`人类简史.md`）
3. 下载后直接放入 Obsidian Vault 中

## 🔧 高级配置

### 修改端口号

如果端口 3737 已被占用，可以修改 `gui/server.js` 中的端口号：

```javascript
const PORT = 3737; // 改为其他端口，如 8080
```

### 文件自动清理

服务器会自动清理超过 1 小时的临时文件，包括：
- 上传的 EPUB 文件
- 转换后的输出文件

您可以在 `gui/server.js` 中修改清理时间：

```javascript
const maxAge = 60 * 60 * 1000; // 1小时（毫秒）
```

## 🐛 常见问题

### Q: 端口被占用怎么办？
A: 关闭占用端口的程序，或修改 `server.js` 中的端口号。

### Q: 上传文件后没有反应？
A: 检查浏览器控制台是否有错误，确保文件是 `.epub` 格式。

### Q: 转换后的图片无法显示？
A: 开启"本地化图片"选项重新转换。

### Q: 如何停止服务器？
A: 在终端中按 `Ctrl+C`。

### Q: 转换后的文件在哪里？
A: 临时保存在 `gui/outputs` 目录中，下载后会在您的下载文件夹。

## 📂 目录结构

```
epub2MD/
├── gui/
│   ├── server.js          # Express 服务器
│   ├── package.json       # 依赖配置
│   ├── public/            # 前端文件
│   │   ├── index.html     # 主页面
│   │   ├── styles.css     # 样式文件
│   │   └── app.js         # 前端逻辑
│   ├── uploads/           # 上传文件临时存储
│   └── outputs/           # 转换结果临时存储
└── start-gui.sh           # 启动脚本
```

## 🔒 安全提示

- 应用仅在本地运行，不会上传文件到互联网
- 临时文件会在 1 小时后自动清理
- 不建议在公网上暴露此服务

## 📞 技术支持

如遇到问题：
1. 查看浏览器控制台的错误信息
2. 查看终端中的服务器日志
3. 参考主项目文档：https://github.com/uxiew/epub2MD

---

**享受阅读！** 📚✨
